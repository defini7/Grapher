{% extends "layout.html" %}

{% block title %}
    Main
{% endblock %}

{% block main %}

<div id="app">
    <canvas id="canvas">
        <p>Your browser is too old for canvas</p>
    </canvas>
</div>
<div class="scrolled">
    <div data-template hidden class="expression">
        <input name="expression" placeholder="Expression" id="input-expression" />
        <input type="color" name="color" placeholder="Color" value="#FF0000" />
        <button data-delete id="btn-delete">X</button>
    </div>

    <div class="controll">
        <div class="row expressions" data-expressions name="expressions" id="exps"></div>

        <div class="row">
            <button data-append id="append">Append</button>
            <button data-draw id="draw">Draw</button>
        </div>

        <div class="row" hidden id="div-error">
            <p data-error></p>
            <input type="button" onclick="hideError()" value="OK" hidden />
        </div>
    </div>
</div>

{% for e in expressions %}
<script>
    appendRow()
    elems = document.querySelector('[data-expressions]').querySelectorAll('.expression')
    elems[elems.length - 1].querySelector('input[name="expression"]').value = `{{ e['expression'] }}`
    elems[elems.length - 1].querySelector('input[name="color"]').value = `{{ e['color'] }}`
</script>
{% endfor %}

{% endblock %}